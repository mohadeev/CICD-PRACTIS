- name: Deploy via SSH
  uses: appleboy/ssh-action@v0.1.7
  with:
    host: ${{ secrets.EC2_HOST }}
    username: ${{ secrets.EC2_USER }}
    key: ${{ secrets.EC2_SSH_KEY }}
    script: |
      cd /home/ec2-user/app
      # Stop old container if exists
      docker rm -f app || true
      # Build new image
      docker build -t app .
      # Run container
      docker run -d -p 3000:3000 --name app app